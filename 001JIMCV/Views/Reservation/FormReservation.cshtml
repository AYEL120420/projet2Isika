@model _001JIMCV.ViewModels.JourneyViewModel
@{
    Layout = "_LayoutJimcv";
}

@if (User.Identity.IsAuthenticated)
{   
    <fieldset>
    <!-- Afficher le recap du voyage -->
    <h2>Récapitulatif du voyage :</h2>
        <p>Destination : </p>
            <p>-Pays:@Model.Journey.CountryDestination</p>
            <p>-Ville : @Model.Journey.CityDestination</p>
        <p>Date de départ : @Model.Journey.DepartureDate</p>
        <p>Date de retour : @Model.Journey.ReturnDate</p>
        <p>Prix voyage pack:  @Model.Journey.Price</p>
        <p>Prix voyage personnalisé: @Model.PackService.Total_price</p>
    </fieldset>
}

@if (User.Identity.IsAuthenticated)
{
    using (Html.BeginForm("AddReservation", "Reservation", FormMethod.Post, new { id = "FormReservation" }))
    {
        @*<fieldset>
            <div>
                @Html.LabelFor(m => m.Reservation.ContactName, "Nom :")
                @Html.TextBoxFor(m => m.Reservation.ContactName, new { required = "required" })
                @Html.ValidationMessageFor(m => m.Reservation.ContactName)
            </div>
            <br>

            <div>
                @Html.LabelFor(m => m.Reservation.ContactEmail, "Email :")
                @Html.TextBoxFor(m => m.Reservation.ContactEmail, new { type = "email", required = "required" })
                @Html.ValidationMessageFor(m => m.Reservation.ContactEmail)
            </div>
            <br>

            <div>
                @Html.LabelFor(m => m.Reservation.ContactPhone, "Téléphone :")
                @Html.TextBoxFor(m => m.Reservation.ContactPhone, new { type = "tel", required = "required" })
                @Html.ValidationMessageFor(m => m.Reservation.ContactPhone)
            </div>
            <br>
        </fieldset>*@
        <fieldset>
            <div>
                @Html.LabelFor(m => m.Reservation.NameCard, "Nom sur la carte")
                @Html.TextBoxFor(m => m.Reservation.NameCard, new { required = "required" })
                @Html.ValidationMessageFor(m => m.Reservation.NameCard)
            </div>

            <div>
                @Html.LabelFor(m => m.Reservation.NumCard, "Numero de carte")
                @Html.TextBoxFor(m => m.Reservation.NumCard, new { required = "required", pattern = @"\d{16}", title = "Veuillez entrer un numéro de carte valide (16 chiffres)." })
                @Html.ValidationMessageFor(m => m.Reservation.NumCard)
            </div>

            <div>
                @Html.LabelFor(m => m.Reservation.ExpirationDate, "Date d'expiration")
                @Html.TextBoxFor(m => m.Reservation.ExpirationDate, new { required = "required", pattern = @"(0[1-9]|1[0-2])\/([0-9]{2})", title = "Veuillez entrer une date d'expiration valide (MM/AA)." })
                @Html.ValidationMessageFor(m => m.Reservation.ExpirationDate)
            </div>

            <div class="form-group">
                @Html.LabelFor(m => m.Reservation.SecurityCode, "Code de sécurité")
                @Html.TextBoxFor(m => m.Reservation.SecurityCode, new { required = "required", pattern = @"\d{3}", title = "Veuillez entrer un code de sécurité valide (3 chiffres)." })
                @Html.ValidationMessageFor(m => m.Reservation.SecurityCode)
            </div>
            @Html.HiddenFor(m=>m.PackService.Id)
            @Html.HiddenFor(m=>m.User.Id)
        </fieldset>

        <input type="submit" value="Réserver" class="btn btn-primary" />
    }
}
